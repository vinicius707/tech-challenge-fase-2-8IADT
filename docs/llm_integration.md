# Integração com LLMs\n\nEste documento descreve a integração com LLMs para gerar instruções a partir das rotas otimizadas.\n\n## Adapter\n\n- Implementação: `src/llm/adapter.py`.\n- Modo OpenAI: usa `OPENAI_API_KEY` (variável de ambiente). Se presente, o adaptador tentará chamar a Chat Completion.\n- Fallback: quando não há chave ou ocorre erro, o adaptador retorna um template estático com instruções padrão.\n\n## Geração de instruções\n\n- Script: `scripts/generate_instructions.py`.\n- Entrada: diretório do experimento contendo `routes.geojson` (gerado pelo export). Opcional: `experiments/prompts/route_instructions_prompt.txt`.\n- Saída: `instruction.txt` no mesmo diretório.\n\n## Como usar\n\n```bash\nPYTHONPATH=. python3 scripts/generate_instructions.py experiments/run_1770494072\n```\n\nSe tiver `OPENAI_API_KEY` configurada e o pacote `openai` instalado, o adaptador usará a API; caso contrário, usará o modo fallback.\n*** End Patch
